<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heart Disease Prediction AI - Ch·∫©n ƒëo√°n b·ªánh tim th√¥ng minh</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: radial-gradient(
          ellipse at center,
          #0a0a2e 0%,
          #16213e 25%,
          #0f3460 50%,
          #533a7d 75%,
          #6a4c93 100%
        );
        min-height: 100vh;
        color: #e2e8f0;
        overflow-x: hidden;
      }



      .bg-grid-pattern {
        background-image: linear-gradient(rgba(6, 182, 212, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(6, 182, 212, 0.1) 1px, transparent 1px);
        background-size: 50px 50px;
      }

      /* Particle System */
      .particle-system {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0; /* Changed to 0 to be behind content */
      }

      .particle {
        position: absolute;
        width: 4px; /* Increased size slightly */
        height: 4px;
        background: rgba(0, 212, 255, 0.6);
        border-radius: 50%;
        animation: float-particle 20s linear infinite, pulse 2s ease-in-out infinite alternate;
      }

      @keyframes float-particle {
        0% {
          transform: translateY(100vh) translateX(0) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
          transform: scale(1);
        }
        90% {
          opacity: 0.6;
        }
        100% {
          transform: translateY(-100px) translateX(50px) scale(0);
          opacity: 0;
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.2);
        }
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 15px;
        position: relative;
        z-index: 10;
      }

      /* Compact Header */
      .header {
        text-align: center;
        margin-bottom: 20px;
        padding: 20px 0;
        background: rgba(15, 23, 42, 0.4);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        border: 1px solid rgba(0, 212, 255, 0.3);
        flex-shrink: 0;
      }

      .logo {
        display: inline-flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #00d4ff, #ff6b9d);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
      }

      .main-title {
        font-family: "Orbitron", monospace;
        font-size: 2.5rem;
        font-weight: 900;
        background: linear-gradient(135deg, #ffffff, #00d4ff, #ffffff, #ff6b9d);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 8px;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
      }

      .subtitle {
        font-size: 1rem;
        color: #ffffff;
        font-weight: 500;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      }

      /* Compact Main Content */
      .main-content {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 800px;
        margin: 0 auto;
      }

      /* Compact Form */
      .form-section {
        background: rgba(15, 23, 42, 0.4);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        border: 1px solid rgba(0, 212, 255, 0.3);
        padding: 20px;
        display: flex;
        flex-direction: column;
        order: 2;
      }

      .form-title {
        font-family: "Orbitron", monospace;
        font-size: 1.4rem;
        font-weight: 700;
        background: linear-gradient(135deg, #00d4ff, #c471ed);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }

      .form-content {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .form-group {
        margin-bottom: 12px;
      }

      .form-label {
        display: block;
        font-size: 0.85rem;
        font-weight: 600;
        color: #cbd5e1;
        margin-bottom: 6px;
      }

      .form-input,
      .form-select {
        width: 100%;
        padding: 10px 15px;
        background: rgba(30, 41, 59, 0.6);
        border: 1px solid rgba(71, 85, 105, 0.5);
        border-radius: 12px;
        color: #e2e8f0;
        font-size: 0.9rem;
        transition: border-color 0.3s ease;
        height: 40px; /* Fixed height */
      }

      .form-input:focus,
      .form-select:focus {
        outline: none;
        border-color: #00d4ff;
      }

      /* Compact Button */
      .analyze-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #00d4ff, #ff6b9d);
        border: none;
        border-radius: 12px;
        color: white;
        font-size: 1rem;
        font-weight: 700;
        font-family: "Orbitron", monospace;
        cursor: pointer;
        transition: transform 0.3s ease;
        margin-top: 15px;
        flex-shrink: 0;
      }

      .analyze-btn:hover {
        transform: translateY(-2px);
      }

      .analyze-btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none;
      }

      /* Compact Loading */
      .loading-spinner {
        display: none;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top: 2px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Results - Hidden by default */
      .result-section {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(10, 10, 46, 0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        display: none;
        overflow-y: auto;
        padding: 10px;
      }

      .result-content-wrapper {
        max-width: 1400px;
        width: 95%;
        margin: 0 auto;
        background: rgba(15, 23, 42, 0.8);
        border-radius: 25px;
        border: 1px solid rgba(0, 212, 255, 0.3);
        padding: 60px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        height: auto;
        min-height: fit-content;
      }

      .result-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 25px;
      }

      .result-header-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .result-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #10b981, #059669);
      }

      .result-title {
        font-family: "Orbitron", monospace;
        font-size: 1.8rem;
        font-weight: 700;
        background: linear-gradient(135deg, #10b981, #00d4ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .close-btn {
        background: rgba(239, 68, 68, 0.2);
        border: 1px solid #ef4444;
        color: #ef4444;
        padding: 8px 15px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        transition: background-color 0.3s ease;
      }

      .close-btn:hover {
        background: rgba(239, 68, 68, 0.3);
      }





      /* Form 2 columns layout */
      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        flex: 1;
      }

      .form-grid .form-group {
        margin-bottom: 0; /* Remove margin-bottom from form-group */
      }

      /* Full width for button */
      .form-full-width {
        grid-column: 1 / -1;
      }

      /* Responsive for all laptop screens */
      
      /* Large Laptops (15-17 inch) */
      @media (min-width: 1440px) {
        .container {
          max-width: 1800px;
          padding: 20px;
        }
        
        .main-content {
          max-width: 900px;
        }
        
        .main-title {
          font-size: 3rem;
        }
        
        .form-title {
          font-size: 1.6rem;
        }
        
        .result-content-wrapper {
          max-width: 1600px;
          width: 90%;
          padding: 70px;
        }
        
        .result-section {
          padding: 15px;
        }
      }
      
      /* Medium Laptops (13-15 inch) */
      @media (min-width: 1200px) and (max-width: 1439px) {
        .container {
          max-width: 1400px;
          padding: 18px;
        }
        
        .main-content {
          max-width: 850px;
        }
        
        .main-title {
          font-size: 2.8rem;
        }
        
        .result-content-wrapper {
          max-width: 1400px;
          width: 92%;
          padding: 60px;
        }
        
        .result-section {
          padding: 12px;
        }
      }
      
      /* Small Laptops (11-13 inch) */
      @media (min-width: 1024px) and (max-width: 1199px) {
        .container {
          max-width: 1200px;
          padding: 15px;
        }
        
        .main-content {
          max-width: 800px;
        }
        
        .main-title {
          font-size: 2.5rem;
        }
        
        .result-content-wrapper {
          max-width: 1200px;
          width: 94%;
          padding: 50px;
        }
        
        .result-section {
          padding: 10px;
        }
      }
      
      /* Tablet Landscape */
      @media (min-width: 768px) and (max-width: 1023px) {
        .container {
          max-width: 1000px;
          padding: 15px;
        }
        
        .main-content {
          max-width: 750px;
        }
        
        .form-grid {
          grid-template-columns: 1fr 1fr;
          gap: 15px;
        }
        
        .result-content-wrapper {
          max-width: 1000px;
          width: 96%;
          padding: 40px;
        }
        
        .result-section {
          padding: 8px;
        }
      }
      
      /* Tablet Portrait */
      @media (min-width: 640px) and (max-width: 767px) {
        .container {
          max-width: 800px;
          padding: 12px;
        }
        
        .main-content {
          max-width: 700px;
        }
        
        .form-grid {
          grid-template-columns: 1fr 1fr;
          gap: 12px;
        }
        
        .main-title {
          font-size: 2.2rem;
        }
        
        .result-content-wrapper {
          max-width: 800px;
          width: 97%;
          padding: 35px;
        }
        
        .result-section {
          padding: 5px;
        }
      }

      /* Mobile Devices */
      @media (max-width: 639px) {
        .container {
          max-width: 100%;
          padding: 10px;
        }
        
        .main-content {
          max-width: 100%;
        }
        
        .form-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .main-title {
          font-size: 2rem;
        }
        .subtitle {
          font-size: 0.9rem;
        }

        .header {
          padding: 15px 0;
          margin-bottom: 15px;
        }

        .form-title {
          font-size: 1.2rem;
        }
        .form-label {
          font-size: 0.8rem;
        }
        .form-input,
        .form-select {
          font-size: 0.85rem;
        }
        .analyze-btn {
          font-size: 0.9rem;
          padding: 12px;
        }

        .result-content-wrapper {
          max-width: 100%;
          width: 98%;
          padding: 25px;
        }
        
        .result-section {
          padding: 3px;
        }
        .result-header-left {
          gap: 10px;
        }
        .result-icon {
          width: 50px;
          height: 50px;
        }
        .result-title {
          font-size: 1.5rem;
        }
        .close-btn {
          font-size: 0.8rem;
          padding: 6px 12px;
        }
        .risk-level {
          font-size: 1.5rem;
          padding: 6px 12px;
        }
      }

      /* Extra Small Mobile */
      @media (max-width: 480px) {
        .main-title {
          font-size: 1.8rem;
        }
        .logo-icon {
          width: 40px;
          height: 40px;
        }
        .result-title {
          font-size: 1.2rem;
        }
        .result-icon {
          width: 40px;
          height: 40px;
        }
        .risk-level {
          font-size: 1.2rem;
        }
        
        .patient-info-display {
          grid-template-columns: 1fr;
          gap: 10px;
        }
        
        .result-content-wrapper {
          max-width: 100%;
          width: 99%;
          padding: 20px;
        }
        
        .result-section {
          padding: 2px;
        }
      }
      
      /* Ultra Small Mobile */
      @media (max-width: 360px) {
        .main-title {
          font-size: 1.5rem;
        }
        .subtitle {
          font-size: 0.8rem;
        }
        .form-title {
          font-size: 1rem;
        }
        .result-content-wrapper {
          max-width: 100%;
          width: 99.5%;
          padding: 15px;
        }
        
        .result-section {
          padding: 1px;
        }
      }

      /* Risk Level Styling */
      .risk-high {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        border-color: #ef4444 !important;
        color: white;
        box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
      }

      .risk-low {
        background: linear-gradient(135deg, #10b981, #059669);
        border-color: #10b981 !important;
        color: white;
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
      }

      /* Simple Animations */
      .fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(15px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Progress bar animations */
      .progress-bar {
        transition: width 1s ease-in-out;
      }

      /* Probability card hover effects */
      .probability-card {
        transition: all 0.3s ease;
      }

      .probability-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      /* Confidence indicator pulse */
      @keyframes confidencePulse {
        0% {
          box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
        }
      }

      .confidence-high {
        animation: confidencePulse 2s infinite;
      }
    </style>
  </head>
  <body>
    <!-- Simplified Grid -->
    <div class="bg-grid-pattern fixed inset-0 opacity-10 pointer-events-none z-0"></div>

    <!-- Minimal Particle System -->
    <div class="particle-system" id="particle-system"></div>

    <div class="container">
      <!-- Compact Header -->
      <div class="header fade-in-up">
        <div class="logo">
          <div class="logo-icon">
            <svg width="25" height="25" fill="white" viewBox="0 0 24 24">
              <path
                d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
              />
            </svg>
          </div>
          <div>
            <h1 class="main-title">Heart Disease Prediction AI</h1>
            <p class="subtitle">H·ªá th·ªëng ch·∫©n ƒëo√°n b·ªánh tim th√¥ng minh v·ªõi AI</p>
          </div>
        </div>
      </div>

      <!-- Compact Main Content -->
      <div class="main-content">
        <!-- Compact Form -->
        <div class="form-section fade-in-up">
          <h2 class="form-title">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" />
            </svg>
            Th√¥ng tin b·ªánh nh√¢n
          </h2>

          <form id="diagnosis-form" class="form-content">
            <div class="form-grid">
              <!-- C·ªôt 1 -->
              <div class="form-group flex flex-col">
                <label class="form-label">Tu·ªïi *</label>
                <input
                  type="number"
                  class="form-input"
                  name="age"
                  min="1"
                  max="120"
                  required
                  placeholder="Nh·∫≠p tu·ªïi"
                />
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Gi·ªõi t√≠nh *</label>
                <select class="form-select" name="sex" required>
                  <option value="">Ch·ªçn gi·ªõi t√≠nh</option>
                  <option value="1">Nam</option>
                  <option value="0">N·ªØ</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Lo·∫°i ƒëau ng·ª±c *</label>
                <select class="form-select" name="cp" required>
                  <option value="">Ch·ªçn lo·∫°i</option>
                  <option value="0">ƒêau ng·ª±c ƒëi·ªÉn h√¨nh</option>
                  <option value="1">ƒêau ng·ª±c kh√¥ng ƒëi·ªÉn h√¨nh</option>
                  <option value="2">ƒêau kh√¥ng li√™n quan</option>
                  <option value="3">Kh√¥ng c√≥ tri·ªáu ch·ª©ng</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Huy·∫øt √°p ngh·ªâ (mmHg) *</label>
                <input
                  type="number"
                  class="form-input"
                  name="trestbps"
                  min="0"
                  max="250"
                  required
                  placeholder="VD: 120"
                />
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Cholesterol (mg/dl) *</label>
                <input
                  type="number"
                  class="form-input"
                  name="chol"
                  min="0"
                  max="300"
                  required
                  placeholder="VD: 200"
                />
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">ƒê∆∞·ªùng huy·∫øt ƒë√≥i > 120 *</label>
                <select class="form-select" name="fbs" required>
                  <option value="">Ch·ªçn k·∫øt qu·∫£</option>
                  <option value="1">ƒê√∫ng (> 120)</option>
                  <option value="0">Sai (‚â§ 120)</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">K·∫øt qu·∫£ ECG ngh·ªâ *</label>
                <select class="form-select" name="restecg" required>
                  <option value="">Ch·ªçn k·∫øt qu·∫£</option>
                  <option value="0">B√¨nh th∆∞·ªùng</option>
                  <option value="1">B·∫•t th∆∞·ªùng ST-T</option>
                  <option value="2">Ph√¨ ƒë·∫°i t√¢m th·∫•t</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Nh·ªãp tim t·ªëi ƒëa *</label>
                <input
                  type="number"
                  class="form-input"
                  name="thalach"
                  min="0"
                  max="300"
                  required
                  placeholder="VD: 150"
                />
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">ƒêau ng·ª±c khi t·∫≠p *</label>
                <select class="form-select" name="exang" required>
                  <option value="">Ch·ªçn</option>
                  <option value="1">C√≥</option>
                  <option value="0">Kh√¥ng</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Ch√™nh l·ªách ST *</label>
                <input
                  type="text"
                  class="form-input"
                  name="oldpeak"
                  required
                  placeholder="VD: 0.8"
                  pattern="[0-9]*\.?[0-9]+"
                  oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                  onblur="validateOldpeak(this)"
                />
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">ƒê·ªô d·ªëc ST *</label>
                <select class="form-select" name="slope" required>
                  <option value="">Ch·ªçn ƒë·ªô d·ªëc</option>
                  <option value="0">D·ªëc l√™n</option>
                  <option value="1">Ph·∫≥ng</option>
                  <option value="2">D·ªëc xu·ªëng</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">M·∫°ch m√°u t·∫Øc (0-3) *</label>
                <select class="form-select" name="ca" required>
                  <option value="">Ch·ªçn s·ªë</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </div>

              <div class="form-group flex flex-col">
                <label class="form-label">Thalassemia *</label>
                <select class="form-select" name="thal" required>
                  <option value="">Ch·ªçn lo·∫°i</option>
                  <option value="1">Khi·∫øm khuy·∫øt c·ªë ƒë·ªãnh</option>
                  <option value="2">B√¨nh th∆∞·ªùng</option>
                  <option value="3">Khi·∫øm khuy·∫øt ƒë·∫£o ng∆∞·ª£c</option>
                </select>
              </div>
            </div>

            <button
              type="submit"
              class="analyze-btn form-full-width"
              id="analyze-btn"
            >
              <div class="loading-spinner" id="loading-spinner"></div>
              <span id="btn-text">üöÄ PH√ÇN T√çCH V·ªöI AI</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Full Screen Results -->
    <div class="result-section" id="result-section">
      <div class="result-content-wrapper">
        <div class="result-header">
          <div class="result-header-left">
            <div class="result-icon">
              <svg width="25" height="25" fill="white" viewBox="0 0 24 24">
                <path
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                />
              </svg>
            </div>
            <div>
              <h3 class="result-title">K·∫æT QU·∫¢ PH√ÇN T√çCH</h3>
              <p style="color: #a5b4fc; font-size: 0.9rem">
                D·ª±a tr√™n thu·∫≠t to√°n AI
              </p>
            </div>
          </div>
          <button class="close-btn" onclick="closeResults()">‚úï ƒê√≥ng</button>
        </div>

        <div class="p-6 space-y-6">
          <!-- Diagnosis Result -->
          <div class="text-center mb-8">
            <div class="mb-4">
              <span id="result-emoji" class="text-6xl"></span>
            </div>
            <div id="result-level" class="inline-block px-6 py-3 rounded-full border-2 font-bold text-2xl"></div>
          </div>

          <!-- Probability Analysis -->
          <div class="bg-slate-700/50 rounded-xl p-6 border border-slate-600">
            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              Ph√¢n t√≠ch x√°c su·∫•t
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Kh·∫£ nƒÉng c√≥ b·ªánh -->
              <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-4 probability-card">
                <div class="flex items-center justify-between mb-2">
                  <span class="text-red-400 font-semibold text-lg">Kh·∫£ nƒÉng c√≥ b·ªánh</span>
                  <span class="text-red-400 text-2xl font-bold" id="disease-probability">0%</span>
                </div>
                <div class="w-full bg-red-500/20 rounded-full h-3">
                  <div class="bg-red-500 h-3 rounded-full progress-bar" id="disease-progress" style="width: 0%"></div>
                </div>
              </div>

              <!-- Kh·∫£ nƒÉng kh√¥ng c√≥ b·ªánh -->
              <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-4 probability-card">
                <div class="flex items-center justify-between mb-2">
                  <span class="text-green-400 font-semibold text-lg">Kh·∫£ nƒÉng kh√¥ng b·ªánh</span>
                  <span class="text-green-400 text-2xl font-bold" id="no-disease-probability">0%</span>
                </div>
                <div class="w-full bg-green-500/20 rounded-full h-3">
                  <div class="bg-green-500 h-3 rounded-full progress-bar" id="no-disease-progress" style="width: 0%"></div>
                </div>
              </div>
            </div>
            
          </div>

          <!-- Patient Info - Top Row -->
          <div class="bg-slate-700/50 rounded-xl p-6 border border-slate-600">
            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" />
              </svg>
              Th√¥ng tin b·ªánh nh√¢n
            </h3>
            <div id="patient-info-display" class="grid grid-cols-2 gap-6 patient-info-display">
              <!-- Patient info will be rendered here -->
            </div>
          </div>

          <!-- Vital Signs - Bottom Row -->
          <div class="bg-slate-700/50 rounded-xl p-6 border border-slate-600">
            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                />
              </svg>
              Ch·ªâ s·ªë sinh hi·ªáu
            </h3>
            <div id="vital-signs-chart" class="space-y-3">
              <!-- Vital signs will be rendered here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Particle System
      function createFloatingParticles() {
        const particleSystem = document.getElementById("particle-system");
        for (let i = 0; i < 8; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 3 + "s";
          particle.style.animationDuration = 3 + Math.random() * 2 + "s";
          particleSystem.appendChild(particle);
        }
      }

      // Form handling
      document
        .getElementById("diagnosis-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const formData = new FormData(this);
          const data = {};

          for (let [key, value] of formData.entries()) {
            data[key] = value;
          }

          // Convert string values to numbers where appropriate
          data.age = parseInt(data.age);
          data.sex = parseInt(data.sex);
          data.cp = parseInt(data.cp);
          data.trestbps = parseInt(data.trestbps);
          data.chol = parseInt(data.chol);
          data.fbs = parseInt(data.fbs);
          data.restecg = parseInt(data.restecg);
          data.thalach = parseInt(data.thalach);
          data.exang = parseInt(data.exang);
          data.oldpeak = parseFloat(data.oldpeak);
          data.slope = parseInt(data.slope);
          data.ca = parseInt(data.ca);
          data.thal = parseInt(data.thal);

          // Show loading
          const btn = document.getElementById("analyze-btn");
          const spinner = document.getElementById("loading-spinner");
          const btnText = document.getElementById("btn-text");

          btn.disabled = true;
          spinner.style.display = "inline-block";
          btnText.textContent = "ƒêang ph√¢n t√≠ch...";

          // Call real AI API
          fetch('/predict', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
          })
          .then(response => response.json())
          .then(result => {
            if (result.error) {
              alert('L·ªói: ' + result.error);
            } else {
              displayResults(result);
            }
          })
          .catch(error => {
            console.error('Error:', error);
            alert('C√≥ l·ªói x·∫£y ra trong qu√° tr√¨nh ph√¢n t√≠ch. Vui l√≤ng th·ª≠ l·∫°i.');
          })
          .finally(() => {
            btn.disabled = false;
            spinner.style.display = "none";
            btnText.textContent = "üöÄ PH√ÇN T√çCH V·ªöI AI";
          });
        });



      function displayResults(result) {
        const resultSection = document.getElementById("result-section");
        const resultEmoji = document.getElementById("result-emoji");
        const resultLevel = document.getElementById("result-level");
        const patientInfoDisplay = document.getElementById("patient-info-display");
        const vitalSignsChart = document.getElementById("vital-signs-chart");

        // Update diagnosis result
        resultEmoji.textContent = result.risk_level === "M·∫Øc b·ªánh" ? "‚ö†Ô∏è" : "‚úÖ";
        resultLevel.textContent = result.risk_level;
        resultLevel.className = `inline-block px-6 py-3 rounded-full border-2 font-bold text-2xl ${result.risk_class}`;

        // Update probability analysis
        const diseaseProbability = Math.round(result.probability_disease * 100);
        const noDiseaseProbability = Math.round(result.probability_no_disease * 100);
        const confidenceLevel = Math.round(result.confidence * 100);

        // Update disease probability
        document.getElementById("disease-probability").textContent = diseaseProbability + "%";
        document.getElementById("disease-progress").style.width = diseaseProbability + "%";

        // Update no disease probability
        document.getElementById("no-disease-probability").textContent = noDiseaseProbability + "%";
        document.getElementById("no-disease-progress").style.width = noDiseaseProbability + "%";

        // Render Patient Info
        let patientInfoHtml = '';
        const patientFieldsToShow = ["age", "sex"];
        const getPatientFieldLabel = (field) => {
          const labels = {
            age: "Tu·ªïi",
            sex: "Gi·ªõi t√≠nh",
          };
          return labels[field];
        };
        const getPatientDisplayValue = (field, value) => {
          switch (field) {
            case "sex":
              return value === 1 ? "Nam" : "N·ªØ";
            default:
              return value.toString();
          }
        };

        patientFieldsToShow.forEach(field => {
          patientInfoHtml += `
            <div class="flex justify-between items-center p-4 bg-cyan-500/10 border border-cyan-500/20 rounded-lg">
              <span class="text-slate-300 text-lg font-medium">${getPatientFieldLabel(field)}</span>
              <span class="text-cyan-400 font-bold text-xl">${getPatientDisplayValue(field, result.patient_data[field])}</span>
            </div>
          `;
        });
        patientInfoDisplay.innerHTML = patientInfoHtml;

        // Render Vital Signs
        let vitalSignsHtml = '';
        
        // Helper function to get display value for different fields
        const getDisplayValue = (field, value) => {
          switch (field) {
            case "cp":
              const cpTypes = ["ƒêau ng·ª±c ƒëi·ªÉn h√¨nh", "ƒêau ng·ª±c kh√¥ng ƒëi·ªÉn h√¨nh", "ƒêau kh√¥ng li√™n quan", "Kh√¥ng c√≥ tri·ªáu ch·ª©ng"];
              return cpTypes[value] || "Kh√¥ng x√°c ƒë·ªãnh";
            case "fbs":
              return value === 1 ? "ƒê√∫ng (> 120)" : "Sai (‚â§ 120)";
            case "restecg":
              const ecgTypes = ["B√¨nh th∆∞·ªùng", "B·∫•t th∆∞·ªùng ST-T", "Ph√¨ ƒë·∫°i t√¢m th·∫•t"];
              return ecgTypes[value] || "Kh√¥ng x√°c ƒë·ªãnh";
            case "exang":
              return value === 1 ? "C√≥" : "Kh√¥ng";
            case "slope":
              const slopeTypes = ["D·ªëc l√™n", "Ph·∫≥ng", "D·ªëc xu·ªëng"];
              return slopeTypes[value] || "Kh√¥ng x√°c ƒë·ªãnh";
            case "thal":
              const thalTypes = ["Kh√¥ng c√≥", "Khi·∫øm khuy·∫øt c·ªë ƒë·ªãnh", "B√¨nh th∆∞·ªùng", "Khi·∫øm khuy·∫øt ƒë·∫£o ng∆∞·ª£c"];
              return thalTypes[value] || "Kh√¥ng x√°c ƒë·ªãnh";
            default:
              return value;
          }
        };

        const vitalSignsData = [
          { parameter: "Huy·∫øt √°p ngh·ªâ", field: "trestbps", unit: "mmHg" },
          { parameter: "Cholesterol", field: "chol", unit: "mg/dl" },
          { parameter: "Nh·ªãp tim t·ªëi ƒëa", field: "thalach", unit: "bpm" },
          { parameter: "Ch√™nh l·ªách ST", field: "oldpeak", unit: "" },
          { parameter: "M·∫°ch m√°u t·∫Øc", field: "ca", unit: "m·∫°ch" },
          { parameter: "Lo·∫°i ƒëau ng·ª±c", field: "cp", unit: "" },
          { parameter: "ƒê∆∞·ªùng huy·∫øt ƒë√≥i > 120", field: "fbs", unit: "" },
          { parameter: "K·∫øt qu·∫£ ECG ngh·ªâ", field: "restecg", unit: "" },
          { parameter: "ƒêau ng·ª±c khi t·∫≠p", field: "exang", unit: "" },
          { parameter: "ƒê·ªô d·ªëc ST", field: "slope", unit: "" },
          { parameter: "Thalassemia", field: "thal", unit: "" },
        ];

        vitalSignsData.forEach(item => {
          const value = result.patient_data[item.field];
          const displayValue = getDisplayValue(item.field, value);

          vitalSignsHtml += `
            <div class="space-y-2">
              <div class="flex justify-between items-center p-3 bg-slate-600/30 rounded-lg">
                <span class="text-sm font-medium text-slate-300">${item.parameter}</span>
                <span class="text-sm text-cyan-400 font-semibold">
                  ${displayValue} ${item.unit}
                </span>
              </div>
            </div>
          `;
        });
        vitalSignsChart.innerHTML = vitalSignsHtml;

        resultSection.style.display = "flex"; // Use flex to center content
      }

      function closeResults() {
        document.getElementById("result-section").style.display = "none";
      }

      // Validation function for oldpeak
      function validateOldpeak(input) {
        const value = parseFloat(input.value);
        if (isNaN(value) || value < 0 || value > 10) {
          input.setCustomValidity('Vui l√≤ng nh·∫≠p s·ªë t·ª´ 0 ƒë·∫øn 10 (c√≥ th·ªÉ l√† s·ªë th·∫≠p ph√¢n)');
          input.style.borderColor = '#ff6b6b';
        } else {
          input.setCustomValidity('');
          input.style.borderColor = 'rgba(71, 85, 105, 0.5)';
        }
      }

      // Initialize when page loads
      window.addEventListener("load", () => {
        createFloatingParticles();
      });
    </script>
  </body>
</html>